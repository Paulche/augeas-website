.. -*- rst -*-
   restindex
     initialheaderlevel: 2
   /restindex

=========================
Setup
=========================

Augeas is an early prototype. To explore it, you have to build it from
source:

::
  
  hg clone http://hg.et.redhat.com/misc/augeas
  cd augeas
  ./autogen.sh && make
  ./src/try cli

Besides autotools_, you will need to have Bison_ and Flex_ installed to
build Augeas successfully.

A sample session
-------------------------

The ``try`` script sets up the environment variables ``AUGEAS_ROOT`` and
``AUGEAS_SPECLIB`` and then starts ``augtool``. This runs ``augtool`` in a
sandbox in ``build/try``, filled with config files from ``tests/root``.

In the ``augtool`` shell, type ``help`` to get a list of commands. For
example, in a sample session you might add a new entry to ``/etc/hosts``:

::

  set /system/config/hosts/10000/ipaddr 192.168.0.1
  set /system/config/hosts/10000/canonical pigiron.example.com
  clear /system/config/hosts/10000/aliases

and also add a new environment variable to the ``AcceptEnv`` setting in
``/etc/ssh/sshd_config``:

::

  set /system/config/sshd/AcceptEnv/10000 FOO

Verify that your changes are in the tree using ``print``:

::

  print /system/config/hosts
  print /system/config/sshd/AcceptEnv

Finally, tell Augeas to change the actual files:

::

  save

With these commands, Augeas has created new files ``etc/hosts.augnew`` and 
``etc/ssh/sshd_config`` in the sandbox in ``build/try`` [1]_. You can use
``diff`` in the shell to convince yourself that the changes happened as
expected. 

.. [1] To make testing easier, Augeas does not overwrite the original
   files. Instead it creates a file with extension ``augnew``. Eventually,
   that has to change, of course.

.. _autotools: http://sources.redhat.com/autobook/
.. _Bison: http://www.gnu.org/software/bison/
.. _Flex: http://flex.sourceforge.net/
